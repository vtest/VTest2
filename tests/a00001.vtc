varnishtest "Test Teken terminal emulator"

feature cmd "vttest --version 2>&1 | grep -q Usage"

process p4 -dump {vttest} -start

process p4 -expect-text 21 11 "Enter choice number (0 - 12):"
process p4 -screen_dump

process p4 -writehex "31 0d"
process p4 -expect-text 14 61 "RETURN"
process p4 -screen_dump

process p4 -writehex 0d
process p4 -expect-text 14 87 "RETURN"
process p4 -screen_dump

process p4 -writehex 0d
process p4 -expect-text 22 7 "RETURN"
process p4 -screen_dump

process p4 -writehex 0d
process p4 -expect-text 3 132 "i"
process p4 -expect-text 22 7 "RETURN"
process p4 -screen_dump

process p4 -writehex 0d
process p4 -expect-text 9 7 "RETURN"
process p4 -screen_dump

process p4 -writehex 0d
process p4 -expect-text 4 1 "This is a correct sentence"
process p4 -expect-text 20 7 "RETURN"
process p4 -screen_dump

process p4 -writehex 0d
process p4 -expect-text 21 11 "Enter choice number (0 - 12):"
process p4 -screen_dump

process p4 -writehex "30 0d"
process p4 -expect-text 12 30 "That's all, folks!"
process p4 -screen_dump

process p4 -wait
